In this paper we analyze the mathematical foundations of IOTA, a cryp-tocurrency for the Internet-of-Things (IoT) industry.  The main feature of thisnovel  cryptocurrency  is  thetangle,  a  directed  acyclic  graph  (DAG)  for  stor-ing  transactions.   The  tangle  naturally  succeeds  the  blockchain  as  its  nextevolutionary step, and offers features that are required to establish a machine-to-machine micropayment system.An essential contribution of this paper is a family of Markov Chain MonteCarlo (MCMC) algorithms.  These algorithms select attachment sites on thetangle for a transaction that has just arrived.